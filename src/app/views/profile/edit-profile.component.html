<h1 class="text-danger text-center mt-4">Edit Profile</h1>

<div class="container-responsive my-md-4">
  <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
    <!-- First Name -->
    <div class="form-group">
      <label class="form-label fw-bold">First Name</label>
      <input
        [ngClass]="getInvalidClass('firstName')"
        class="form-control"
        formControlName="firstName"
        required
      />
      <div class="invalid-feedback">{{ getError("firstName") }}</div>
    </div>

    <!-- Last Name -->
    <div class="form-group">
      <label class="form-label fw-bold">Last Name</label>
      <input class="form-control" formControlName="lastName" required />
      <div [ngClass]="getInvalidClass('lastName')" class="invalid-feedback">
        {{ getError("lastName") }}
      </div>
    </div>

    <!-- Role -->
    <div *ngIf="isAdmin">
      <label class="form-label fw-bold">Role</label>
      <select
        [ngClass]="getInvalidClass('role')"
        class="form-select btn btn-danger"
        formControlName="role"
      >
        <option class="btn btn-light" value="{{ RoleName.Admin }}">
          Admin
        </option>
        <option class="btn btn-light" value="{{ RoleName.Teacher }}">
          Teacher
        </option>
        <option class="btn btn-light" value="{{ RoleName.Student }}">
          Student
        </option>
      </select>
      <div class="invalid-feedback">{{ getError("role") }}</div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label class="form-label fw-bold">Email</label>
      <input
        type="email"
        class="form-control"
        autocomplete="username"
        value="{{ user.email }}"
        readonly
      />
    </div>

    <hr />

    <div class="text-left mb-4">
      <label class="form-label text-danger fw-bold">Change password</label>
      <a routerLink="../changepassword" class="btn btn-outline-danger w-100"
        >Change Password</a
      >
    </div>

    <div class="text-left mb-4">
      <label class="form-label text-danger fw-bold">Delete account</label>
      <a routerLink="../delete" class="btn btn-outline-danger w-100"
        >Delete account</a
      >
    </div>

    <hr />

    <!-- Buttons -->
    <div class="d-flex flex-row buttons">
      <button
        class="btn btn-secondary me-1 w-50"
        (click)="back()"
        type="button"
      >
        Cancel
      </button>
      <button class="btn btn-danger ms-1 w-50" type="submit">Save</button>
    </div>
  </form>
</div>

<app-loading *ngIf="isSubmitting"></app-loading>
